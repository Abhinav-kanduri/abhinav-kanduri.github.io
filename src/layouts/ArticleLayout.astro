---
// Grab frontmatter
const { title, description, pubDate, heroImage, tags, author } = Astro.frontmatter;

// Map tag â†’ badge color
const tagColors = {
  'generative-ai': 'bg-indigo-100 text-indigo-800',
  tutorials:      'bg-green-100 text-green-800',
  'data-engineering':'bg-blue-100 text-blue-800',
  'case-studies': 'bg-yellow-100 text-yellow-800',
  architecture:   'bg-pink-100 text-pink-800',
  tools:          'bg-red-100 text-red-800',
  default:        'bg-gray-100 text-gray-800'
};
---

<article class="prose prose-lg mx-auto py-16">
  <!-- Hero banner -->
  <div class="relative mb-12 rounded-xl overflow-hidden">
    <img src={heroImage} alt={title} class="w-full h-64 object-cover brightness-75" />
    <div class="absolute inset-0 p-8 flex flex-col justify-end text-white">
      <h1 class="text-4xl font-bold drop-shadow-lg">{title}</h1>
      {description && <p class="mt-2 drop-shadow-sm">{description}</p>}
      <div class="mt-4 flex items-center space-x-4">
        <img src={author.image} alt={author.name} class="w-10 h-10 rounded-full border-2 border-white"/>
        <div class="drop-shadow-sm">
          <p class="font-semibold">{author.name}</p>
          <time class="text-sm">{new Date(pubDate).toLocaleDateString()}</time>
        </div>
      </div>
      <div class="mt-4 flex flex-wrap gap-2">
        {tags.map(tag => (
          <span class={`px-3 py-1 rounded-full text-sm font-medium ${
            tagColors[tag] ?? tagColors.default
          }`}>{tag}</span>
        ))}
      </div>
    </div>
  </div>

  <!-- The Markdown content -->
  <slot />

  <!-- Newsletter at bottom -->
  <div class="mt-16 border-t pt-12">
    <Newsletter />
  </div>
</article>
